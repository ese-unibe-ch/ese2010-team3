#{extends 'main.html' /}
#{set title:'ajopi - Profile' /}
#{if showUser}
	<div class="editprofile">
		#{form @CUser.saveProfile(showUser.getName())}
			<table>
				<tr>
					#{field 'Username'}
					<td><label for="username">&{'secure.username'}:</label></td>
					<td><label for="username">${showUser.name}</label></td>
					#{/field}
				</tr>
				<tr>
					#{field 'email'}
					<td><label for="email">&{'secure.email'}:</label></td>
					<td><input type="email" name="email" id="email" value="${showUser.email}" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'fullname'}
					<td><label for="fullname">&{'secure.realname'}:</label></td>
					<td><input type="text" name="fullname" id="fullname" value="${showUser.fullname}" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'birthday'}
					<td><label for="birthday">&{'secure.birthday'}:</label></td>
					<td><input type="text" name="birthday" id="birthday" value="${showUser.getDateOfBirth()}" pattern="[0-3]?\d[./][0-3]?\d[./]\d{4}?|\d{4}-[01]\d-[0-3]\d|" placeholder="&{'dateformat'}" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'website'}
					<td><label for="website">&{'secure.website'}:</label></td>
					<td><input type="url" name="website" id="website" value="${showUser.website}" placeholder="http://" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'profession'}
					<td><label for="profession">&{'secure.profession'}:</label>
					<td><input type="text" name="profession" id="profession" value="${showUser.profession}" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'employer'}
					<td><label for="employer">&{'secure.employer'}:</label></td>
					<td><input type="text" name="employer" id="employer" value="${showUser.employer}" /></td>
					#{/field}
				</tr>
				<tr>
					#{field 'biography'}
					<td><label for="biography">&{'secure.biography'}:</label></td>
					<td><textarea class="editprofile" name="${field.name}">${showUser.biography}</textarea></td>
					#{/field}
				</tr>
					<td><label for="oldPassword">&{'Old password: '}</label></td>
					<td><input type="text" name="oldPassword" id="oldPassword" value="${showUser.oldPassword}" /></td>
				</tr>
				<tr>
					<td><label for="newPassword">&{'New password: '}</label></td>
					<td><input type="text" name="newPassword" id="newPassword" value="${showUser.newPassword}" /></td>
				</tr>
				<tr>
					<td></td>
					<td><input type="submit" id="saveProfile" value="&{'secure.saveprofile'}" /></td>
				</tr>
			</table>
		#{/form}
	</div><!-- end showprofile -->
#{/if}
#{else}
	#{set title:'Error' /}
	<h1>&{'user.nonexistant'} ${name}</h1>
#{/else}
